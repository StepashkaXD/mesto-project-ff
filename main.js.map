{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-ptoject-ff/./src/components/api.js","webpack://mesto-ptoject-ff/./src/components/card.js","webpack://mesto-ptoject-ff/./src/components/popup.js","webpack://mesto-ptoject-ff/./src/components/validation.js","webpack://mesto-ptoject-ff/./src/index.js"],"sourcesContent":["const url = \"https://mesto.nomoreparties.co/v1/wff-cohort-35\";\nconst token = \"b9c5a04f-0e97-4430-8ee9-bf7a21ea5318\";\nconst headers = {\n  config: {\n    authorization: token,\n    \"Content-Type\": \"application/json\",\n  },\n};\n\nconst testResponse = (res) => {\n  if (res.ok) {\n    return res.json().then((data) => {\n      return data;\n    });\n  }\n  return Promise.reject(`Ошибка: ${res.status}`);\n};\n\nexport const getArrayCards = () => {\n  return fetch(url + \"/cards\", {\n    method: \"GET\",\n    headers: headers.config,\n  }).then(testResponse);\n};\n\nexport const getUser = () => {\n  return fetch(url + \"/users/me\", {\n    method: \"GET\",\n    headers: headers.config,\n  }).then(testResponse);\n};\n\nexport const editProfile = (name, about) => {\n  return fetch(url + \"/users/me\", {\n    method: \"PATCH\",\n    headers: headers.config,\n    body: JSON.stringify({\n      name: name,\n      about: about,\n    }),\n  }).then(testResponse);\n};\n\nexport const editAvatar = (link) => {\n  return fetch(url + \"/users/me/avatar\", {\n    method: \"PATCH\",\n    headers: headers.config,\n    body: JSON.stringify({\n      avatar: link,\n    }),\n  }).then(testResponse);\n};\n\nexport const addCard = (name, link) => {\n  return fetch(url + \"/cards\", {\n    method: \"POST\",\n    headers: headers.config,\n    body: JSON.stringify({\n      name: name,\n      link: link,\n    }),\n  }).then(testResponse);\n};\n\nexport const deleteCard = (cardId) => {\n  return fetch(url + \"/cards/\" + cardId, {\n    method: \"DELETE\",\n    headers: headers.config,\n  }).then(testResponse);\n};\n\nexport const likeCard = (cardId) => {\n  return fetch(url + \"/cards/\" + cardId + \"/likes\", {\n    method: \"PUT\",\n    headers: headers.config,\n  }).then(testResponse);\n};\n\nexport const unlikeCard = (cardId) => {\n  return fetch(url + \"/cards/\" + cardId + \"/likes\", {\n    method: \"DELETE\",\n    headers: headers.config,\n  }).then(testResponse);\n};\n","export function createCard(\n  cardData,\n  handleConfirmToDeleteCard,\n  handleImageClick,\n  handleLike,\n  userId\n) {\n  const cardTemplate = document.querySelector(\"#card-template\").content;\n  const cardElement = cardTemplate\n    .querySelector(\".places__item\")\n    .cloneNode(true);\n  const imageContainer = cardElement.querySelector(\".card__image-container\");\n  const cardImage = cardElement.querySelector(\".card__image\");\n  const deleteButton = cardElement.querySelector(\".card__delete-button\");\n  const likeButton = cardElement.querySelector(\".card__like-button\");\n  const likeCounter = cardElement.querySelector(\".card__like-counter\");\n\n  imageContainer.appendChild(cardImage);\n\n  const img = new Image();\n  img.onload = () => {\n    cardImage.src = cardData.link;\n    imageContainer.classList.remove(\"card__image-container_no-image\");\n  };\n  img.onerror = () => {\n    imageContainer.classList.add(\"card__image-container_no-image\");\n    imageContainer.textContent = \"Упс...\";\n  };\n  img.src = cardData.link;\n\n  cardImage.alt = cardData.name;\n  cardElement.querySelector(\".card__title\").textContent = cardData.name;\n  likeCounter.textContent = cardData.likes.length;\n\n  if (cardData.owner._id !== userId) {\n    deleteButton.style.display = \"none\";\n  }\n\n  if (cardData.likes.length) {\n    cardData.likes.forEach((like) => {\n      if (like._id === userId) {\n        toggleLikeButton(likeButton);\n      }\n    });\n  }\n\n  cardImage.addEventListener(\"click\", () => handleImageClick(cardData));\n  deleteButton.addEventListener(\"click\", () =>\n    handleConfirmToDeleteCard(cardData._id, cardElement)\n  );\n  likeButton.addEventListener(\"click\", () => {\n    const isLiked = likeButton.classList.contains(\n      \"card__like-button_is-active\"\n    );\n    handleLike(cardData._id, isLiked, likeButton, likeCounter);\n  });\n\n  return cardElement;\n}\n\nexport function updateLikeCard(likeCaunter, likes) {\n  likeCaunter.textContent = likes.length;\n}\n\nexport function removeCardElement(cardElement) {\n  cardElement.remove();\n}\n\nexport function toggleLikeButton(button) {\n  button.classList.toggle(\"card__like-button_is-active\");\n}\n","export function openPopup(popup) {\n  popup.classList.add(\"popup_is-opened\");\n  document.addEventListener(\"keydown\", handleEscClose);\n}\n\nexport function closePopup(popup) {\n  popup.classList.remove(\"popup_is-opened\");\n  document.removeEventListener(\"keydown\", handleEscClose);\n}\n\nfunction handleEscClose(evt) {\n  if (evt.key === \"Escape\") {\n    const openedPopup = document.querySelector(\".popup_is-opened\");\n    if (openedPopup) {\n      closePopup(openedPopup);\n    }\n  }\n}\n\nexport function initPopups() {\n  const popups = document.querySelectorAll(\".popup\");\n\n  popups.forEach((popup) => {\n    popup.addEventListener(\"click\", (evt) => {\n      if (\n        evt.target.classList.contains(\"popup\") ||\n        evt.target.classList.contains(\"popup__close\")\n      ) {\n        closePopup(popup);\n      }\n    });\n  });\n}\n","const showInputError = (formElement, inputElement, errorMessage, config) => {\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n  inputElement.classList.add(config.inputErrorClass);\n  errorElement.textContent = errorMessage;\n  errorElement.classList.add(config.errorClass);\n};\n\nconst hideInputError = (formElement, inputElement, config) => {\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n  inputElement.classList.remove(config.inputErrorClass);\n  errorElement.classList.remove(config.errorClass);\n  errorElement.textContent = \"\";\n};\n\nconst checkInputValidity = (formElement, inputElement, config) => {\n  if (inputElement.validity.patternMismatch) {\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\n  } else {\n    inputElement.setCustomValidity(\"\");\n  }\n\n  if (!inputElement.validity.valid) {\n    showInputError(\n      formElement,\n      inputElement,\n      inputElement.validationMessage,\n      config\n    );\n  } else {\n    hideInputError(formElement, inputElement, config);\n  }\n};\n\nconst toggleButtonState = (inputList, buttonElement, config) => {\n  if (hasInvalidInput(inputList)) {\n    buttonElement.classList.add(config.inactiveButtonClass);\n    buttonElement.disabled = true;\n  } else {\n    buttonElement.classList.remove(config.inactiveButtonClass);\n    buttonElement.disabled = false;\n  }\n};\n\nconst hasInvalidInput = (inputList) => {\n  return inputList.some((inputElement) => {\n    return !inputElement.validity.valid;\n  });\n};\n\nconst setEventListeners = (formElement, config) => {\n  const inputList = Array.from(\n    formElement.querySelectorAll(config.inputSelector)\n  );\n  const buttonElement = formElement.querySelector(config.submitButtonSelector);\n\n  toggleButtonState(inputList, buttonElement, config);\n\n  inputList.forEach((inputElement) => {\n    inputElement.addEventListener(\"input\", function () {\n      checkInputValidity(formElement, inputElement, config);\n      toggleButtonState(inputList, buttonElement, config);\n    });\n  });\n};\n\nexport const enableValidation = (config) => {\n  const formList = Array.from(document.querySelectorAll(config.formSelector));\n  formList.forEach((formElement) => {\n    setEventListeners(formElement, config);\n  });\n};\n\nexport const clearValidation = (formElement, config) => {\n  const inputList = Array.from(\n    formElement.querySelectorAll(config.inputSelector)\n  );\n  const buttonElement = formElement.querySelector(config.submitButtonSelector);\n\n  inputList.forEach((inputElement) => {\n    hideInputError(formElement, inputElement, config);\n  });\n\n  toggleButtonState(inputList, buttonElement, config);\n};\n","`use strict`;\n\nimport \"./pages/index.css\";\nimport {\n  getArrayCards,\n  getUser,\n  editProfile,\n  editAvatar,\n  addCard,\n  deleteCard,\n  likeCard,\n  unlikeCard,\n} from \"./components/api.js\";\nimport {\n  createCard,\n  updateLikeCard,\n  removeCardElement,\n  toggleLikeButton,\n} from \"./components/card.js\";\nimport { openPopup, closePopup, initPopups } from \"./components/popup.js\";\nimport { enableValidation, clearValidation } from \"./components/validation.js\";\n\nconst placesList = document.querySelector(\".places__list\");\nconst titleProfile = document.querySelector(\".profile__title\");\nconst descriptionProfile = document.querySelector(\".profile__description\");\nconst profileAvatar = document.querySelector(\".profile__image\");\n\nconst formProfile = document.forms.edit_profile;\nconst formNewPlace = document.forms.new_place;\nconst formAvatar = document.forms.avatar;\n\nconst popupTypeImage = document.querySelector(\".popup_type_image\");\nconst popupImage = popupTypeImage.querySelector(\".popup__image\");\nconst popupCaption = popupTypeImage.querySelector(\".popup__caption\");\nconst popupProfile = document.querySelector(\".popup_type_edit\");\nconst popupNewPlace = document.querySelector(\".popup_type_new-card\");\nconst popupAvatar = document.querySelector(\".popup_type_avatar\");\nconst popupConfirm = document.querySelector(\".popup_type_confirm\");\n\nconst editButton = document.querySelector(\".profile__edit-button\");\nconst addButton = document.querySelector(\".profile__add-button\");\nconst avatarButton = document.querySelector(\".profile__image-button\");\nconst confirmButton = document.querySelector(\".popup__button-confirm\");\n\nconst loaderContainer = document.querySelector(\".page__loader-container\");\n\nlet userId = null;\nlet cardIdToDelete;\nlet cardElementToDelete;\n\nconst validationConfig = {\n  formSelector: \".popup__form\",\n  inputSelector: \".popup__input\",\n  submitButtonSelector: \".popup__button\",\n  inactiveButtonClass: \"popup__button_inactive\",\n  inputErrorClass: \"popup__input_type_error\",\n  errorClass: \"popup__error_visible\",\n};\n\nfunction handleError(error, errorMessage) {\n  console.log(errorMessage, error);\n}\n\nfunction handleLikeCard(cardId, isLiked, likeButton, likeCounter) {\n  const likeAction = isLiked ? unlikeCard : likeCard;\n\n  likeAction(cardId)\n    .then((updatedCard) => {\n      toggleLikeButton(likeButton);\n      updateLikeCard(likeCounter, updatedCard.likes);\n    })\n    .catch((error) => handleError(error, \"Ошибка обновления лайка:\"));\n}\n\nfunction handleConfirmToDeleteCard(cardId, cardElement) {\n  cardIdToDelete = cardId;\n  cardElementToDelete = cardElement;\n\n  openPopup(popupConfirm);\n}\n\nfunction handleDeleteCard(cardId, cardElement) {\n  deleteCard(cardId)\n    .then(() => removeCardElement(cardElement))\n    .catch((error) => handleError(error, \"Ошибка при удалении карточки:\"));\n}\n\nfunction openCardPopup(cardData) {\n  popupImage.src = cardData.link;\n  popupImage.alt = cardData.name;\n  popupCaption.textContent = cardData.name;\n  openPopup(popupTypeImage);\n}\n\nfunction updateUserData(userData) {\n  titleProfile.textContent = userData.name;\n  descriptionProfile.textContent = userData.about;\n  profileAvatar.style.backgroundImage = `url(${userData.avatar})`;\n}\n\nfunction validateImage(url) {\n  return new Promise((res, rej) => {\n    const img = new Image();\n    img.onload = () => res(true);\n    img.onerror = () => rej(new Error(\"Ошибка при загрузке изображения\"));\n    img.src = url;\n  });\n}\n\nfunction handleAvatarError() {\n  const linkInput = formAvatar.elements.link;\n  formAvatar.reset();\n  const errorElement = formAvatar.querySelector(\".url-avatar-input-error\");\n  linkInput.classList.add(\"popup__input_type_error\");\n  errorElement.classList.add(\"popup__error_visible\");\n  errorElement.textContent =\n    \"Ошибка при загрузке изображения, попробуйте другую ссылку\";\n}\n\nfunction handleAvatarFormSubmit(evt) {\n  evt.preventDefault();\n  const link = formAvatar.elements.link.value;\n  renderLoading(true, evt.submitter);\n\n  validateImage(link)\n    .then(() => editAvatar(link))\n    .then((res) => {\n      updateUserData(res);\n      setTimeout(() => closePopup(popupAvatar), 100);\n    })\n    .catch(() => {\n      handleAvatarError();\n    })\n    .finally(() => {\n      renderLoading(false, evt.submitter);\n    });\n}\n\nfunction handleProfileFormSubmit(evt) {\n  evt.preventDefault();\n  const name = formProfile.elements.name.value;\n  const about = formProfile.elements.description.value;\n  renderLoading(true, evt.submitter);\n\n  editProfile(name, about)\n    .then((res) => {\n      titleProfile.textContent = res.name;\n      descriptionProfile.textContent = res.about;\n      setTimeout(() => {\n        closePopup(popupProfile);\n      }, 100);\n    })\n    .catch((error) => {\n      console.log(\"Ошибка обновления профиля:\", error);\n    })\n    .finally(() => {\n      renderLoading(false, evt.submitter);\n    });\n}\n\nfunction handleNewPlaceFormSubmit(evt) {\n  evt.preventDefault();\n  const name = formNewPlace.elements.name.value;\n  const link = formNewPlace.elements.link.value;\n  renderLoading(true, evt.submitter);\n  addCard(name, link)\n    .then((newCard) => {\n      placesList.prepend(\n        createCard(\n          newCard,\n          handleConfirmToDeleteCard,\n          openCardPopup,\n          handleLikeCard,\n          userId\n        )\n      );\n      setTimeout(() => {\n        closePopup(popupNewPlace);\n      }, 100);\n      formNewPlace.reset();\n    })\n    .catch((error) => {\n      console.log(\"Ошибка добавления карточки:\", error);\n    })\n    .finally(() => {\n      renderLoading(false, evt.submitter);\n    });\n}\n\nfunction renderLoading(isLoading, button) {\n  button.textContent = isLoading ? \"Сохранение...\" : \"Сохранение\";\n}\n\neditButton.addEventListener(\"click\", () => {\n  formProfile.elements.name.value = titleProfile.textContent;\n  formProfile.elements.description.value = descriptionProfile.textContent;\n  clearValidation(formProfile, validationConfig);\n  openPopup(popupProfile);\n});\n\naddButton.addEventListener(\"click\", () => {\n  formNewPlace.reset();\n  clearValidation(formNewPlace, validationConfig);\n  openPopup(popupNewPlace);\n});\n\navatarButton.addEventListener(\"click\", () => {\n  formAvatar.reset();\n  clearValidation(formAvatar, validationConfig);\n  openPopup(popupAvatar);\n});\n\nconfirmButton.addEventListener(\"click\", () => {\n  handleDeleteCard(cardIdToDelete, cardElementToDelete);\n  closePopup(popupConfirm);\n});\n\nformProfile.addEventListener(\"submit\", handleProfileFormSubmit);\nformNewPlace.addEventListener(\"submit\", handleNewPlaceFormSubmit);\nformAvatar.addEventListener(\"submit\", handleAvatarFormSubmit);\n\nenableValidation(validationConfig);\ninitPopups();\n\nPromise.all([getArrayCards(), getUser()])\n  .then(([cardsData, userData]) => {\n    updateUserData(userData);\n    userId = userData._id;\n    cardsData.forEach((cardData) => {\n      placesList.append(\n        createCard(\n          cardData,\n          handleConfirmToDeleteCard,\n          openCardPopup,\n          handleLikeCard,\n          userId\n        )\n      );\n    });\n  })\n  .catch((error) => {\n    console.log(\"Ошибка при загрузке данных:\", error);\n  })\n  .finally(() => {\n    loaderContainer.remove();\n  });\n"],"names":["url","headers","config","authorization","testResponse","res","ok","json","then","data","Promise","reject","concat","status","likeCard","cardId","fetch","method","unlikeCard","createCard","cardData","handleConfirmToDeleteCard","handleImageClick","handleLike","userId","cardElement","document","querySelector","content","cloneNode","imageContainer","cardImage","deleteButton","likeButton","likeCounter","appendChild","img","Image","onload","src","link","classList","remove","onerror","add","textContent","alt","name","likes","length","owner","_id","style","display","forEach","like","toggleLikeButton","addEventListener","isLiked","contains","button","toggle","openPopup","popup","handleEscClose","closePopup","removeEventListener","evt","key","openedPopup","hideInputError","formElement","inputElement","errorElement","id","inputErrorClass","errorClass","toggleButtonState","inputList","buttonElement","hasInvalidInput","inactiveButtonClass","disabled","some","validity","valid","clearValidation","Array","from","querySelectorAll","inputSelector","submitButtonSelector","cardIdToDelete","cardElementToDelete","placesList","titleProfile","descriptionProfile","profileAvatar","formProfile","forms","edit_profile","formNewPlace","new_place","formAvatar","avatar","popupTypeImage","popupImage","popupCaption","popupProfile","popupNewPlace","popupAvatar","popupConfirm","editButton","addButton","avatarButton","confirmButton","loaderContainer","validationConfig","formSelector","handleError","error","errorMessage","console","log","handleLikeCard","updatedCard","likeCaunter","catch","openCardPopup","updateUserData","userData","about","backgroundImage","renderLoading","isLoading","elements","value","description","reset","deleteCard","removeCardElement","preventDefault","submitter","body","JSON","stringify","editProfile","setTimeout","finally","addCard","newCard","prepend","rej","Error","validateImage","editAvatar","linkInput","handleAvatarError","patternMismatch","setCustomValidity","dataset","showInputError","validationMessage","checkInputValidity","setEventListeners","target","all","_ref","_ref2","cardsData","append"],"sourceRoot":""}