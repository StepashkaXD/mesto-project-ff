{"version":3,"file":"main.js","mappings":"mBAAA,IAAMA,EAAM,kDAENC,EAAU,CACdC,OAAQ,CACNC,cAHU,uCAIV,eAAgB,qBAIdC,EAAe,SAACC,GACpB,OAAIA,EAAIC,GACCD,EAAIE,OAENC,QAAQC,OAAO,WAADC,OAAYL,EAAIM,QACvC,EAuDaC,EAAW,SAACC,GACvB,OAAOC,MAAMd,EAAM,UAAYa,EAAS,SAAU,CAChDE,OAAQ,MACRd,QAASA,EAAQC,SAChBc,KAAKZ,EACV,EAEaa,EAAa,SAACJ,GACzB,OAAOC,MAAMd,EAAM,UAAYa,EAAS,SAAU,CAChDE,OAAQ,SACRd,QAASA,EAAQC,SAChBc,KAAKZ,EACV,ECjFO,SAASc,EACdC,EACAC,EACAC,EACAC,EACAC,GAEA,IACMC,EADeC,SAASC,cAAc,kBAAkBC,QAC7BD,cAAc,iBAAiBE,WAAU,GACpEC,EAAYL,EAAYE,cAAc,gBACtCI,EAAeN,EAAYE,cAAc,wBACzCK,EAAaP,EAAYE,cAAc,sBACvCM,EAAcR,EAAYE,cAAc,uBAgC9C,OA9BAG,EAAUI,IAAMd,EAASe,KACzBL,EAAUM,IAAMhB,EAASiB,KACzBZ,EAAYE,cAAc,gBAAgBW,YAAclB,EAASiB,KACjEJ,EAAYK,YAAclB,EAASmB,MAAMC,OAErCpB,EAASqB,MAAMC,MAAQlB,IACzBO,EAAaY,MAAMC,QAAU,QAG3BxB,EAASmB,MAAMC,QACjBpB,EAASmB,MAAMM,SAAQ,SAACC,GAClBA,EAAKJ,MAAQlB,GACfuB,EAAiBf,EAErB,IAGFF,EAAUkB,iBAAiB,SAAS,kBAAM1B,EAAiBF,EAAS,IAEpEW,EAAaiB,iBAAiB,SAAS,kBACrC3B,EAA0BD,EAASsB,IAAKjB,EAAY,IAGtDO,EAAWgB,iBAAiB,SAAS,WACnC,IAAMC,EAAUjB,EAAWkB,UAAUC,SACnC,+BAEF5B,EAAWH,EAASsB,IAAKO,EAASjB,EAAYC,EAChD,IAEOR,CACT,CAUO,SAASsB,EAAiBK,GAC/BA,EAAOF,UAAUG,OAAO,8BAC1B,CCzDO,SAASC,EAAUC,GACxBA,EAAML,UAAUM,IAAI,mBACpB9B,SAASsB,iBAAiB,UAAWS,EACvC,CAEO,SAASC,EAAWH,GACzBA,EAAML,UAAUS,OAAO,mBACvBjC,SAASkC,oBAAoB,UAAWH,EAC1C,CAEA,SAASA,EAAeI,GACtB,GAAgB,WAAZA,EAAIC,IAAkB,CACxB,IAAMC,EAAcrC,SAASC,cAAc,oBACvCoC,GACFL,EAAWK,EAEf,CACF,CCVA,SAASC,EAAeC,EAAaC,EAAcC,GACjD,IAAMC,EAAeH,EAAYtC,cAAc,IAADhB,OAAKuD,EAAaG,GAAE,WAClEH,EAAahB,UAAUS,OAAOQ,EAASG,iBACvCF,EAAalB,UAAUS,OAAOQ,EAASI,YACvCH,EAAa9B,YAAc,EAC7B,CAqBA,SAASkC,EAAkBC,EAAWC,EAAeP,GAC3BM,EAAUE,MAChC,SAACT,GAAY,OAAMA,EAAaU,SAASC,KAAK,KAI9CH,EAAcxB,UAAUM,IAAIW,EAASW,qBACrCJ,EAAcK,UAAW,IAEzBL,EAAcxB,UAAUS,OAAOQ,EAASW,qBACxCJ,EAAcK,UAAW,EAE7B,CAoBO,SAASC,EAAgBf,EAAaE,GAC3C,IAAMM,EAAYQ,MAAMC,KACtBjB,EAAYkB,iBAAiBhB,EAASiB,gBAExCX,EAAU5B,SAAQ,SAACqB,GACjBF,EAAeC,EAAaC,EAAcC,EAC5C,IAIAK,EAAkBC,EAHIR,EAAYtC,cAChCwC,EAASkB,sBAEiClB,EAC9C,C,sGCtDA,IAuBImB,EACAC,EDgC6BpB,ECxD3BqB,EAAa9D,SAASC,cAAc,iBACpC8D,EAAe/D,SAASC,cAAc,mBACtC+D,EAAqBhE,SAASC,cAAc,yBAC5CgE,EAAgBjE,SAASC,cAAc,mBAEvCiE,EAAclE,SAASmE,MAAMC,aAC7BC,EAAerE,SAASmE,MAAMG,UAC9BC,EAAavE,SAASmE,MAAMK,OAE5BC,EAAiBzE,SAASC,cAAc,qBACxCyE,EAAaD,EAAexE,cAAc,iBAC1C0E,EAAeF,EAAexE,cAAc,mBAC5C2E,EAAe5E,SAASC,cAAc,oBACtC4E,EAAgB7E,SAASC,cAAc,wBACvC6E,EAAc9E,SAASC,cAAc,sBACrC8E,EAAe/E,SAASC,cAAc,uBAEtC+E,EAAahF,SAASC,cAAc,yBACpCgF,EAAYjF,SAASC,cAAc,wBACnCiF,EAAelF,SAASC,cAAc,0BACtCkF,EAAgBnF,SAASC,cAAc,0BAEzCH,EAAS,KAIPsF,EAAmB,CACvBC,aAAc,eACd3B,cAAe,gBACfC,qBAAsB,iBACtBP,oBAAqB,yBACrBR,gBAAiB,0BACjBC,WAAY,6BAGd,SAASyC,EAAelG,EAAQmC,EAASjB,EAAYC,IAChCgB,EAAU/B,EAAaL,GAE/BC,GACRG,MAAK,SAACgG,GHdJ,IAAwBC,EAAa3E,EGetCQ,EAAiBf,GHfQkF,EGgBVjF,EHhBuBM,EGgBV0E,EAAY1E,MHf5C2E,EAAY5E,YAAcC,EAAMC,MGgB9B,IACC2E,OAAM,SAACC,GACNC,QAAQC,IAAI,2BAA4BF,EAC1C,GACJ,CAEA,SAAS/F,EAA0BP,EAAQW,GACzC6D,EAAiBxE,EACjByE,EAAsB9D,EAEtB6B,EAAUmD,EACZ,CAYA,SAASc,EAAcnG,GACrBgF,EAAWlE,IAAMd,EAASe,KAC1BiE,EAAWhE,IAAMhB,EAASiB,KAC1BgE,EAAa/D,YAAclB,EAASiB,KACpCiB,EAAU6C,EACZ,CAiFA,SAASqB,EAAcC,EAAWrE,GAChCA,EAAOd,YAAcmF,EAAY,gBAAkB,YACrD,CAEAf,EAAW1D,iBAAiB,SAAS,WACnC4C,EAAY8B,SAASrF,KAAKsF,MAAQlC,EAAanD,YAC/CsD,EAAY8B,SAASE,YAAYD,MAAQjC,EAAmBpD,YAC5D0C,EAAgBY,EAAakB,GAC7BxD,EAAUgD,EACZ,IAEAK,EAAU3D,iBAAiB,SAAS,WAClC+C,EAAa8B,QACb7C,EAAgBe,EAAce,GAC9BxD,EAAUiD,EACZ,IAEAK,EAAa5D,iBAAiB,SAAS,WACrCiD,EAAW4B,QACX7C,EAAgBiB,EAAYa,GAC5BxD,EAAUkD,EACZ,IAEAK,EAAc7D,iBAAiB,SAAS,WAvHxC,IAAkCvB,IAwHC8D,EJvIT,SAACzE,GACzB,OAAOC,MAAMd,EAAM,UAAYa,EAAQ,CACrCE,OAAQ,SACRd,QAASA,EAAQC,SAChBc,KAAKZ,EACV,CIWEyH,CAuHiBxC,GAtHdrE,MAAK,YH5BH,SAA2BQ,GAChCA,EAAYkC,QACd,CG2BMoE,CAAkBtG,EACpB,IACC0F,OAAM,SAACC,GACNC,QAAQC,IAAI,gCAAiCF,EAC/C,IAkHF1D,EAAW+C,EACb,IAEAb,EAAY5C,iBAAiB,UArG7B,SAAiCa,GAC/BA,EAAImE,iBACJ,IAAM3F,EAAOuD,EAAY8B,SAASrF,KAAKsF,MACjCM,EAAQrC,EAAY8B,SAASE,YAAYD,MAC/CH,GAAc,EAAM3D,EAAIqE,WJ1EC,SAAC7F,EAAM4F,GAChC,OAAOlH,MAAMd,EAAM,YAAa,CAC9Be,OAAQ,QACRd,QAASA,EAAQC,OACjBgI,KAAMC,KAAKC,UAAU,CACnBhG,KAAMA,EACN4F,MAAOA,MAERhH,KAAKZ,EACV,CImEEiI,CAAYjG,EAAM4F,GACfhH,MAAK,SAACX,GACLmF,EAAanD,YAAchC,EAAI+B,KAC/BqD,EAAmBpD,YAAchC,EAAI2H,MACrCM,YAAW,WACT7E,EAAW4C,EACb,GAAG,IACL,IACCa,OAAM,SAACC,GACNC,QAAQC,IAAI,6BAA8BF,EAC5C,IACCoB,SAAQ,WACPhB,GAAc,EAAO3D,EAAIqE,UAC3B,GACJ,IAkFAnC,EAAa/C,iBAAiB,UAhF9B,SAAkCa,GAChCA,EAAImE,iBACJ,IAAM3F,EAAO0D,EAAa2B,SAASrF,KAAKsF,MAClCxF,EAAO4D,EAAa2B,SAASvF,KAAKwF,MACxCH,GAAc,EAAM3D,EAAIqE,WJ3EH,SAAC7F,EAAMF,GAC5B,OAAOpB,MAAMd,EAAM,SAAU,CAC3Be,OAAQ,OACRd,QAASA,EAAQC,OACjBgI,KAAMC,KAAKC,UAAU,CACnBhG,KAAMA,EACNF,KAAMA,MAEPlB,KAAKZ,EACV,CIoEEoI,CAAQpG,EAAMF,GACXlB,MAAK,SAACyH,GACLlD,EAAWmD,QACTxH,EACEuH,EACArH,EACAkG,EACAP,EACAxF,IAGJ+G,YAAW,WACT7E,EAAW6C,EACb,GAAG,KACHR,EAAa8B,OACf,IACCV,OAAM,SAACC,GACNC,QAAQC,IAAI,8BAA+BF,EAC7C,IACCoB,SAAQ,WACPhB,GAAc,EAAO3D,EAAIqE,UAC3B,GACJ,IAqDAjC,EAAWjD,iBAAiB,UAnD5B,SAAgCa,GAC9BA,EAAImE,iBACJ,IAAM7F,EAAO8D,EAAWyB,SAASvF,KAAKwF,MACtCH,GAAc,EAAM3D,EAAIqE,WJlHA,SAAC/F,GACzB,OAAOpB,MAAMd,EAAM,mBAAoB,CACrCe,OAAQ,QACRd,QAASA,EAAQC,OACjBgI,KAAMC,KAAKC,UAAU,CACnBnC,OAAQ/D,MAETlB,KAAKZ,EACV,CI4GEuI,CAAWzG,GACRlB,MAAK,SAACX,GACLqF,EAAchD,MAAMkG,gBAAkB,OAAHlI,OAAUL,EAAI4F,OAAM,KACvDqC,YAAW,WACT7E,EAAW8C,EACb,GAAG,KACHP,EAAW4B,OACb,IACCV,OAAM,SAACC,GACNC,QAAQC,IAAI,iCAAkCF,EAChD,IACCoB,SAAQ,WACPhB,GAAc,EAAO3D,EAAIqE,UAC3B,GACJ,ID7FiC/D,EC+HhB2C,ED9HE7B,MAAMC,KAAKxD,SAASyD,iBAAiBhB,EAAS4C,eACtDlE,SAAQ,SAACoB,IAjCpB,SAA2BA,EAAaE,GACtC,IAAMM,EAAYQ,MAAMC,KACtBjB,EAAYkB,iBAAiBhB,EAASiB,gBAElCV,EAAgBT,EAAYtC,cAChCwC,EAASkB,sBAGXb,EAAkBC,EAAWC,EAAeP,GAE5CM,EAAU5B,SAAQ,SAACqB,GACjBA,EAAalB,iBAAiB,SAAS,YA5C3C,SAA4BiB,EAAaC,EAAcC,GACjDD,EAAaU,SAASkE,gBACxB5E,EAAa6E,kBAAkB7E,EAAa8E,QAAQC,cAEpD/E,EAAa6E,kBAAkB,IAG5B7E,EAAaU,SAASC,MAQzBb,EAAeC,EAAaC,EAAcC,GA7B9C,SAAwBF,EAAaC,EAAc+E,EAAc9E,GAC/D,IAAMC,EAAeH,EAAYtC,cAAc,IAADhB,OAAKuD,EAAaG,GAAE,WAClEH,EAAahB,UAAUM,IAAIW,EAASG,iBACpCF,EAAa9B,YAAc2G,EAC3B7E,EAAalB,UAAUM,IAAIW,EAASI,WACtC,CAiBI2E,CACEjF,EACAC,EACAA,EAAaiF,kBACbhF,EAKN,CA4BMiF,CAAmBnF,EAAaC,EAAcC,GAC9CK,EAAkBC,EAAWC,EAAeP,EAC9C,GACF,GACF,CAkBIkF,CAAkBpF,EAAaE,EACjC,ID9DezC,SAASyD,iBAAiB,UAElCtC,SAAQ,SAACU,GACdA,EAAMP,iBAAiB,SAAS,SAACa,IAE7BA,EAAIyF,OAAOpG,UAAUC,SAAS,UAC9BU,EAAIyF,OAAOpG,UAAUC,SAAS,kBAE9BO,EAAWH,EAEf,GACF,IEiLF9C,QAAQ8I,IAAI,CJ/LHxI,MAAMd,EAAM,SAAU,CAC3Be,OAAQ,MACRd,QAASA,EAAQC,SAChBc,KAAKZ,GAIDU,MAAMd,EAAM,YAAa,CAC9Be,OAAQ,MACRd,QAASA,EAAQC,SAChBc,KAAKZ,KIsLPY,MAAK,SAAAuI,GAA2B,I,IAAAC,G,EAAA,E,4CAAAD,I,s1BAAzBE,EAASD,EAAA,GAAEE,EAAQF,EAAA,IAnH7B,SAAwBE,GACtBlE,EAAanD,YAAcqH,EAAStH,KACpCqD,EAAmBpD,YAAcqH,EAAS1B,MAC1CtC,EAAchD,MAAMkG,gBAAkB,OAAHlI,OAAUgJ,EAASzD,OAAM,IAC9D,CAgHI0D,CAAeD,GACfnI,EAASmI,EAASjH,IAClBgH,EAAU7G,SAAQ,SAACzB,GACjBoE,EAAWqE,OACT1I,EACEC,EACAC,EACAkG,EACAP,EACAxF,GAGN,GACF,IACC2F,OAAM,SAACC,GACNC,QAAQC,IAAI,8BAA+BF,EAC7C,G","sources":["webpack://mesto-ptoject-ff/./src/components/api.js","webpack://mesto-ptoject-ff/./src/components/card.js","webpack://mesto-ptoject-ff/./src/components/popup.js","webpack://mesto-ptoject-ff/./src/components/validation.js","webpack://mesto-ptoject-ff/./src/index.js"],"sourcesContent":["const url = \"https://mesto.nomoreparties.co/v1/wff-cohort-35\";\nconst token = \"b9c5a04f-0e97-4430-8ee9-bf7a21ea5318\";\nconst headers = {\n  config: {\n    authorization: token,\n    \"Content-Type\": \"application/json\",\n  },\n};\n\nconst testResponse = (res) => {\n  if (res.ok) {\n    return res.json();\n  }\n  return Promise.reject(`Ошибка: ${res.status}`);\n};\n\nexport const getArrayCards = () => {\n  return fetch(url + \"/cards\", {\n    method: \"GET\",\n    headers: headers.config,\n  }).then(testResponse);\n};\n\nexport const getUser = () => {\n  return fetch(url + \"/users/me\", {\n    method: \"GET\",\n    headers: headers.config,\n  }).then(testResponse);\n};\n\nexport const editProfile = (name, about) => {\n  return fetch(url + \"/users/me\", {\n    method: \"PATCH\",\n    headers: headers.config,\n    body: JSON.stringify({\n      name: name,\n      about: about,\n    }),\n  }).then(testResponse);\n};\n\nexport const editAvatar = (link) => {\n  return fetch(url + \"/users/me/avatar\", {\n    method: \"PATCH\",\n    headers: headers.config,\n    body: JSON.stringify({\n      avatar: link,\n    }),\n  }).then(testResponse);\n};\n\nexport const addCard = (name, link) => {\n  return fetch(url + \"/cards\", {\n    method: \"POST\",\n    headers: headers.config,\n    body: JSON.stringify({\n      name: name,\n      link: link,\n    }),\n  }).then(testResponse);\n};\n\nexport const deleteCard = (cardId) => {\n  return fetch(url + \"/cards/\" + cardId, {\n    method: \"DELETE\",\n    headers: headers.config,\n  }).then(testResponse);\n};\n\nexport const likeCard = (cardId) => {\n  return fetch(url + \"/cards/\" + cardId + \"/likes\", {\n    method: \"PUT\",\n    headers: headers.config,\n  }).then(testResponse);\n};\n\nexport const unlikeCard = (cardId) => {\n  return fetch(url + \"/cards/\" + cardId + \"/likes\", {\n    method: \"DELETE\",\n    headers: headers.config,\n  }).then(testResponse);\n};\n","export function createCard(\n  cardData,\n  handleConfirmToDeleteCard,\n  handleImageClick,\n  handleLike,\n  userId\n) {\n  const cardTemplate = document.querySelector(\"#card-template\").content;\n  const cardElement = cardTemplate.querySelector(\".places__item\").cloneNode(true);\n  const cardImage = cardElement.querySelector(\".card__image\");\n  const deleteButton = cardElement.querySelector(\".card__delete-button\");\n  const likeButton = cardElement.querySelector(\".card__like-button\");\n  const likeCounter = cardElement.querySelector(\".card__like-counter\");\n\n  cardImage.src = cardData.link;\n  cardImage.alt = cardData.name;\n  cardElement.querySelector(\".card__title\").textContent = cardData.name;\n  likeCounter.textContent = cardData.likes.length;\n\n  if (cardData.owner._id !== userId) {\n    deleteButton.style.display = \"none\";\n  }\n\n  if (cardData.likes.length) {\n    cardData.likes.forEach((like) => {\n      if (like._id === userId) {\n        toggleLikeButton(likeButton);\n      }\n    });\n  }\n\n  cardImage.addEventListener(\"click\", () => handleImageClick(cardData));\n\n  deleteButton.addEventListener(\"click\", () =>\n    handleConfirmToDeleteCard(cardData._id, cardElement)\n  );\n\n  likeButton.addEventListener(\"click\", () => {\n    const isLiked = likeButton.classList.contains(\n      \"card__like-button_is-active\"\n    );\n    handleLike(cardData._id, isLiked, likeButton, likeCounter);\n  });\n\n  return cardElement;\n}\n\nexport function updateLikeCard(likeCaunter, likes) {\n  likeCaunter.textContent = likes.length;\n}\n\nexport function removeCardElement(cardElement) {\n  cardElement.remove();\n}\n\nexport function toggleLikeButton(button) {\n  button.classList.toggle(\"card__like-button_is-active\");\n}\n","export function openPopup(popup) {\n  popup.classList.add(\"popup_is-opened\");\n  document.addEventListener(\"keydown\", handleEscClose);\n}\n\nexport function closePopup(popup) {\n  popup.classList.remove(\"popup_is-opened\");\n  document.removeEventListener(\"keydown\", handleEscClose);\n}\n\nfunction handleEscClose(evt) {\n  if (evt.key === \"Escape\") {\n    const openedPopup = document.querySelector(\".popup_is-opened\");\n    if (openedPopup) {\n      closePopup(openedPopup);\n    }\n  }\n}\n\nexport function initPopups() {\n  const popups = document.querySelectorAll(\".popup\");\n\n  popups.forEach((popup) => {\n    popup.addEventListener(\"click\", (evt) => {\n      if (\n        evt.target.classList.contains(\"popup\") ||\n        evt.target.classList.contains(\"popup__close\")\n      ) {\n        closePopup(popup);\n      }\n    });\n  });\n}\n","function showInputError(formElement, inputElement, errorMessage, settings) {\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n  inputElement.classList.add(settings.inputErrorClass);\n  errorElement.textContent = errorMessage;\n  errorElement.classList.add(settings.errorClass);\n}\n\nfunction hideInputError(formElement, inputElement, settings) {\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n  inputElement.classList.remove(settings.inputErrorClass);\n  errorElement.classList.remove(settings.errorClass);\n  errorElement.textContent = \"\";\n}\n\nfunction checkInputValidity(formElement, inputElement, settings) {\n  if (inputElement.validity.patternMismatch) {\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\n  } else {\n    inputElement.setCustomValidity(\"\");\n  }\n\n  if (!inputElement.validity.valid) {\n    showInputError(\n      formElement,\n      inputElement,\n      inputElement.validationMessage,\n      settings\n    );\n  } else {\n    hideInputError(formElement, inputElement, settings);\n  }\n}\n\nfunction toggleButtonState(inputList, buttonElement, settings) {\n  const hasInvalidInput = inputList.some(\n    (inputElement) => !inputElement.validity.valid\n  );\n\n  if (hasInvalidInput) {\n    buttonElement.classList.add(settings.inactiveButtonClass);\n    buttonElement.disabled = true;\n  } else {\n    buttonElement.classList.remove(settings.inactiveButtonClass);\n    buttonElement.disabled = false;\n  }\n}\n\nfunction setEventListeners(formElement, settings) {\n  const inputList = Array.from(\n    formElement.querySelectorAll(settings.inputSelector)\n  );\n  const buttonElement = formElement.querySelector(\n    settings.submitButtonSelector\n  );\n\n  toggleButtonState(inputList, buttonElement, settings);\n\n  inputList.forEach((inputElement) => {\n    inputElement.addEventListener(\"input\", () => {\n      checkInputValidity(formElement, inputElement, settings);\n      toggleButtonState(inputList, buttonElement, settings);\n    });\n  });\n}\n\nexport function clearValidation(formElement, settings) {\n  const inputList = Array.from(\n    formElement.querySelectorAll(settings.inputSelector)\n  );\n  inputList.forEach((inputElement) => {\n    hideInputError(formElement, inputElement, settings);\n  });\n  const buttonElement = formElement.querySelector(\n    settings.submitButtonSelector\n  );\n  toggleButtonState(inputList, buttonElement, settings);\n}\n\nexport function enableValidation(settings) {\n  const formList = Array.from(document.querySelectorAll(settings.formSelector));\n  formList.forEach((formElement) => {\n    setEventListeners(formElement, settings);\n  });\n}\n","`use strict`;\n\nimport \"./pages/index.css\";\nimport {\n  getArrayCards,\n  getUser,\n  editProfile,\n  editAvatar,\n  addCard,\n  deleteCard,\n  likeCard,\n  unlikeCard,\n} from \"./components/api.js\";\nimport {\n  createCard,\n  updateLikeCard,\n  removeCardElement,\n  toggleLikeButton,\n} from \"./components/card.js\";\nimport { openPopup, closePopup, initPopups } from \"./components/popup.js\";\nimport { enableValidation, clearValidation } from \"./components/validation.js\";\n\nconst placesList = document.querySelector(\".places__list\");\nconst titleProfile = document.querySelector(\".profile__title\");\nconst descriptionProfile = document.querySelector(\".profile__description\");\nconst profileAvatar = document.querySelector(\".profile__image\");\n\nconst formProfile = document.forms.edit_profile;\nconst formNewPlace = document.forms.new_place;\nconst formAvatar = document.forms.avatar;\n\nconst popupTypeImage = document.querySelector(\".popup_type_image\");\nconst popupImage = popupTypeImage.querySelector(\".popup__image\");\nconst popupCaption = popupTypeImage.querySelector(\".popup__caption\");\nconst popupProfile = document.querySelector(\".popup_type_edit\");\nconst popupNewPlace = document.querySelector(\".popup_type_new-card\");\nconst popupAvatar = document.querySelector(\".popup_type_avatar\");\nconst popupConfirm = document.querySelector(\".popup_type_confirm\");\n\nconst editButton = document.querySelector(\".profile__edit-button\");\nconst addButton = document.querySelector(\".profile__add-button\");\nconst avatarButton = document.querySelector(\".profile__image-button\");\nconst confirmButton = document.querySelector(\".popup__button-confirm\");\n\nlet userId = null;\nlet cardIdToDelete;\nlet cardElementToDelete;\n\nconst validationConfig = {\n  formSelector: \".popup__form\",\n  inputSelector: \".popup__input\",\n  submitButtonSelector: \".popup__button\",\n  inactiveButtonClass: \"popup__button_inactive\",\n  inputErrorClass: \"popup__input_type_error\",\n  errorClass: \"popup__input-error_active\",\n};\n\nfunction handleLikeCard(cardId, isLiked, likeButton, likeCounter) {\n  const likeAction = isLiked ? unlikeCard : likeCard;\n\n  likeAction(cardId)\n    .then((updatedCard) => {\n      toggleLikeButton(likeButton);\n      updateLikeCard(likeCounter, updatedCard.likes);\n    })\n    .catch((error) => {\n      console.log(\"Ошибка обновления лайка:\", error);\n    });\n}\n\nfunction handleConfirmToDeleteCard(cardId, cardElement) {\n  cardIdToDelete = cardId;\n  cardElementToDelete = cardElement;\n\n  openPopup(popupConfirm);\n}\n\nfunction handleDeleteCard(cardId, cardElement) {\n  deleteCard(cardId)\n    .then(() => {\n      removeCardElement(cardElement);\n    })\n    .catch((error) => {\n      console.log(\"Ошибка при удалении карточки:\", error);\n    });\n}\n\nfunction openCardPopup(cardData) {\n  popupImage.src = cardData.link;\n  popupImage.alt = cardData.name;\n  popupCaption.textContent = cardData.name;\n  openPopup(popupTypeImage);\n}\n\nfunction updateUserData(userData) {\n  titleProfile.textContent = userData.name;\n  descriptionProfile.textContent = userData.about;\n  profileAvatar.style.backgroundImage = `url(${userData.avatar})`;\n}\n\nfunction handleProfileFormSubmit(evt) {\n  evt.preventDefault();\n  const name = formProfile.elements.name.value;\n  const about = formProfile.elements.description.value;\n  renderLoading(true, evt.submitter);\n\n  editProfile(name, about)\n    .then((res) => {\n      titleProfile.textContent = res.name;\n      descriptionProfile.textContent = res.about;\n      setTimeout(() => {\n        closePopup(popupProfile);\n      }, 100);\n    })\n    .catch((error) => {\n      console.log(\"Ошибка обновления профиля:\", error);\n    })\n    .finally(() => {\n      renderLoading(false, evt.submitter);\n    });\n}\n\nfunction handleNewPlaceFormSubmit(evt) {\n  evt.preventDefault();\n  const name = formNewPlace.elements.name.value;\n  const link = formNewPlace.elements.link.value;\n  renderLoading(true, evt.submitter);\n\n  addCard(name, link)\n    .then((newCard) => {\n      placesList.prepend(\n        createCard(\n          newCard,\n          handleConfirmToDeleteCard,\n          openCardPopup,\n          handleLikeCard,\n          userId\n        )\n      );\n      setTimeout(() => {\n        closePopup(popupNewPlace);\n      }, 100);\n      formNewPlace.reset();\n    })\n    .catch((error) => {\n      console.log(\"Ошибка добавления карточки:\", error);\n    })\n    .finally(() => {\n      renderLoading(false, evt.submitter);\n    });\n}\n\nfunction handleAvatarFormSubmit(evt) {\n  evt.preventDefault();\n  const link = formAvatar.elements.link.value;\n  renderLoading(true, evt.submitter);\n\n  editAvatar(link)\n    .then((res) => {\n      profileAvatar.style.backgroundImage = `url(${res.avatar})`;\n      setTimeout(() => {\n        closePopup(popupAvatar);\n      }, 100);\n      formAvatar.reset();\n    })\n    .catch((error) => {\n      console.log(\"Ошибка при обновлении аватара:\", error);\n    })\n    .finally(() => {\n      renderLoading(false, evt.submitter);\n    });\n}\n\nfunction renderLoading(isLoading, button) {\n  button.textContent = isLoading ? \"Сохранение...\" : \"Сохранение\";\n}\n\neditButton.addEventListener(\"click\", () => {\n  formProfile.elements.name.value = titleProfile.textContent;\n  formProfile.elements.description.value = descriptionProfile.textContent;\n  clearValidation(formProfile, validationConfig);\n  openPopup(popupProfile);\n});\n\naddButton.addEventListener(\"click\", () => {\n  formNewPlace.reset();\n  clearValidation(formNewPlace, validationConfig);\n  openPopup(popupNewPlace);\n});\n\navatarButton.addEventListener(\"click\", () => {\n  formAvatar.reset();\n  clearValidation(formAvatar, validationConfig);\n  openPopup(popupAvatar);\n});\n\nconfirmButton.addEventListener(\"click\", () => {\n  handleDeleteCard(cardIdToDelete, cardElementToDelete);\n  closePopup(popupConfirm);\n});\n\nformProfile.addEventListener(\"submit\", handleProfileFormSubmit);\nformNewPlace.addEventListener(\"submit\", handleNewPlaceFormSubmit);\nformAvatar.addEventListener(\"submit\", handleAvatarFormSubmit);\n\nenableValidation(validationConfig);\ninitPopups();\n\nPromise.all([getArrayCards(), getUser()])\n  .then(([cardsData, userData]) => {\n    updateUserData(userData);\n    userId = userData._id;\n    cardsData.forEach((cardData) => {\n      placesList.append(\n        createCard(\n          cardData,\n          handleConfirmToDeleteCard,\n          openCardPopup,\n          handleLikeCard,\n          userId\n        )\n      );\n    });\n  })\n  .catch((error) => {\n    console.log(\"Ошибка при загрузке данных:\", error);\n  });\n"],"names":["url","headers","config","authorization","testResponse","res","ok","json","Promise","reject","concat","status","likeCard","cardId","fetch","method","then","unlikeCard","createCard","cardData","handleConfirmToDeleteCard","handleImageClick","handleLike","userId","cardElement","document","querySelector","content","cloneNode","cardImage","deleteButton","likeButton","likeCounter","src","link","alt","name","textContent","likes","length","owner","_id","style","display","forEach","like","toggleLikeButton","addEventListener","isLiked","classList","contains","button","toggle","openPopup","popup","add","handleEscClose","closePopup","remove","removeEventListener","evt","key","openedPopup","hideInputError","formElement","inputElement","settings","errorElement","id","inputErrorClass","errorClass","toggleButtonState","inputList","buttonElement","some","validity","valid","inactiveButtonClass","disabled","clearValidation","Array","from","querySelectorAll","inputSelector","submitButtonSelector","cardIdToDelete","cardElementToDelete","placesList","titleProfile","descriptionProfile","profileAvatar","formProfile","forms","edit_profile","formNewPlace","new_place","formAvatar","avatar","popupTypeImage","popupImage","popupCaption","popupProfile","popupNewPlace","popupAvatar","popupConfirm","editButton","addButton","avatarButton","confirmButton","validationConfig","formSelector","handleLikeCard","updatedCard","likeCaunter","catch","error","console","log","openCardPopup","renderLoading","isLoading","elements","value","description","reset","deleteCard","removeCardElement","preventDefault","about","submitter","body","JSON","stringify","editProfile","setTimeout","finally","addCard","newCard","prepend","editAvatar","backgroundImage","patternMismatch","setCustomValidity","dataset","errorMessage","showInputError","validationMessage","checkInputValidity","setEventListeners","target","all","_ref","_ref2","cardsData","userData","updateUserData","append"],"sourceRoot":""}