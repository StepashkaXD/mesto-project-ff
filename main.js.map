{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-ptoject-ff/./src/components/api.js","webpack://mesto-ptoject-ff/./src/components/card.js","webpack://mesto-ptoject-ff/./src/components/popup.js","webpack://mesto-ptoject-ff/./src/components/validation.js","webpack://mesto-ptoject-ff/./src/index.js"],"sourcesContent":["const url = \"https://mesto.nomoreparties.co/v1/wff-cohort-35\";\nconst token = \"b9c5a04f-0e97-4430-8ee9-bf7a21ea5318\";\nconst headers = {\n  config: {\n    authorization: token,\n    \"Content-Type\": \"application/json\",\n  },\n};\n\nconst testResponse = (res) => {\n  if (res.ok) {\n    return res.json();\n  }\n  return Promise.reject(`Ошибка: ${res.status}`);\n};\n\nexport const getArrayCards = () => {\n  return fetch(url + \"/cards\", {\n    method: \"GET\",\n    headers: headers.config,\n  }).then(testResponse);\n};\n\nexport const getUser = () => {\n  return fetch(url + \"/users/me\", {\n    method: \"GET\",\n    headers: headers.config,\n  }).then(testResponse);\n};\n\nexport const editProfile = (name, about) => {\n  return fetch(url + \"/users/me\", {\n    method: \"PATCH\",\n    headers: headers.config,\n    body: JSON.stringify({\n      name: name,\n      about: about,\n    }),\n  }).then(testResponse);\n};\n\nexport const editAvatar = (link) => {\n  return fetch(url + \"/users/me/avatar\", {\n    method: \"PATCH\",\n    headers: headers.config,\n    body: JSON.stringify({\n      avatar: link,\n    }),\n  }).then(testResponse);\n};\n\nexport const addCard = (name, link) => {\n  return fetch(url + \"/cards\", {\n    method: \"POST\",\n    headers: headers.config,\n    body: JSON.stringify({\n      name: name,\n      link: link,\n    }),\n  }).then(testResponse);\n};\n\nexport const deleteCard = (cardId) => {\n  return fetch(url + \"/cards/\" + cardId, {\n    method: \"DELETE\",\n    headers: headers.config,\n  }).then(testResponse);\n};\n\nexport const likeCard = (cardId) => {\n  return fetch(url + \"/cards/\" + cardId + \"/likes\", {\n    method: \"PUT\",\n    headers: headers.config,\n  }).then(testResponse);\n};\n\nexport const unlikeCard = (cardId) => {\n  return fetch(url + \"/cards/\" + cardId + \"/likes\", {\n    method: \"DELETE\",\n    headers: headers.config,\n  }).then(testResponse);\n};\n","export function createCard(\n  cardData,\n  handleConfirmToDeleteCard,\n  handleImageClick,\n  handleLike,\n  userId\n) {\n  const cardTemplate = document.querySelector(\"#card-template\").content;\n  const cardElement = cardTemplate\n    .querySelector(\".places__item\")\n    .cloneNode(true);\n  const cardImage = cardElement.querySelector(\".card__image\");\n  const deleteButton = cardElement.querySelector(\".card__delete-button\");\n  const likeButton = cardElement.querySelector(\".card__like-button\");\n  const likeCounter = cardElement.querySelector(\".card__like-counter\");\n\n  cardImage.src = cardData.link;\n  cardImage.alt = cardData.name;\n  cardElement.querySelector(\".card__title\").textContent = cardData.name;\n  likeCounter.textContent = cardData.likes.length;\n\n  if (cardData.owner._id !== userId) {\n    deleteButton.style.display = \"none\";\n  }\n\n  if (cardData.likes.length) {\n    cardData.likes.forEach((like) => {\n      if (like._id === userId) {\n        likeButton.classList.toggle(\"card__like-button_is-active\");\n      }\n    });\n  }\n\n  cardImage.addEventListener(\"click\", () => handleImageClick(cardData));\n\n  deleteButton.addEventListener(\"click\", () =>\n    handleConfirmToDeleteCard(cardData._id, cardElement)\n  );\n\n  likeButton.addEventListener(\"click\", () => {\n    const isLiked = likeButton.classList.contains(\n      \"card__like-button_is-active\"\n    );\n    handleLike(cardData._id, isLiked, likeButton, likeCounter);\n  });\n\n  return cardElement;\n}\n","export function openPopup(popup) {\n  popup.classList.add(\"popup_is-opened\");\n  document.addEventListener(\"keydown\", handleEscClose);\n}\n\nexport function closePopup(popup) {\n  popup.classList.remove(\"popup_is-opened\");\n  document.removeEventListener(\"keydown\", handleEscClose);\n}\n\nfunction handleEscClose(evt) {\n  if (evt.key === \"Escape\") {\n    const openedPopup = document.querySelector(\".popup_is-opened\");\n    if (openedPopup) {\n      closePopup(openedPopup);\n    }\n  }\n}\n\nexport function initPopups() {\n  const popups = document.querySelectorAll(\".popup\");\n\n  popups.forEach((popup) => {\n    popup.addEventListener(\"click\", (evt) => {\n      if (\n        evt.target.classList.contains(\"popup\") ||\n        evt.target.classList.contains(\"popup__close\")\n      ) {\n        closePopup(popup);\n      }\n    });\n  });\n}\n","function showInputError(formElement, inputElement, errorMessage, settings) {\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n  inputElement.classList.add(settings.inputErrorClass);\n  errorElement.textContent = errorMessage;\n  errorElement.classList.add(settings.errorClass);\n}\n\nfunction hideInputError(formElement, inputElement, settings) {\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\n  inputElement.classList.remove(settings.inputErrorClass);\n  errorElement.classList.remove(settings.errorClass);\n  errorElement.textContent = \"\";\n}\n\nfunction checkInputValidity(formElement, inputElement, settings) {\n  if (inputElement.validity.patternMismatch) {\n    inputElement.setCustomValidity(inputElement.dataset.errorMessage);\n  } else {\n    inputElement.setCustomValidity(\"\");\n  }\n\n  if (!inputElement.validity.valid) {\n    showInputError(\n      formElement,\n      inputElement,\n      inputElement.validationMessage,\n      settings\n    );\n  } else {\n    hideInputError(formElement, inputElement, settings);\n  }\n}\n\nfunction toggleButtonState(inputList, buttonElement, settings) {\n  const hasInvalidInput = inputList.some(\n    (inputElement) => !inputElement.validity.valid\n  );\n\n  if (hasInvalidInput) {\n    buttonElement.classList.add(settings.inactiveButtonClass);\n    buttonElement.disabled = true;\n  } else {\n    buttonElement.classList.remove(settings.inactiveButtonClass);\n    buttonElement.disabled = false;\n  }\n}\n\nfunction setEventListeners(formElement, settings) {\n  const inputList = Array.from(\n    formElement.querySelectorAll(settings.inputSelector)\n  );\n  const buttonElement = formElement.querySelector(\n    settings.submitButtonSelector\n  );\n\n  toggleButtonState(inputList, buttonElement, settings);\n\n  inputList.forEach((inputElement) => {\n    inputElement.addEventListener(\"input\", () => {\n      checkInputValidity(formElement, inputElement, settings);\n      toggleButtonState(inputList, buttonElement, settings);\n    });\n  });\n}\n\nexport function clearValidation(formElement, settings) {\n  const inputList = Array.from(\n    formElement.querySelectorAll(settings.inputSelector)\n  );\n  inputList.forEach((inputElement) => {\n    hideInputError(formElement, inputElement, settings);\n  });\n  const buttonElement = formElement.querySelector(\n    settings.submitButtonSelector\n  );\n  toggleButtonState(inputList, buttonElement, settings);\n}\n\nexport function enableValidation(settings) {\n  const formList = Array.from(document.querySelectorAll(settings.formSelector));\n  formList.forEach((formElement) => {\n    formElement.addEventListener(\"submit\", (evt) => evt.preventDefault());\n    setEventListeners(formElement, settings);\n    clearValidation(formElement, settings);\n  });\n}\n","`use strict`;\n\nimport \"./pages/index.css\";\nimport {\n  getArrayCards,\n  getUser,\n  editProfile,\n  editAvatar,\n  addCard,\n  deleteCard,\n  likeCard,\n  unlikeCard,\n} from \"./components/api.js\";\nimport { createCard } from \"./components/card.js\";\nimport { openPopup, closePopup, initPopups } from \"./components/popup.js\";\nimport { enableValidation, clearValidation } from \"./components/validation.js\";\n\nconst placesList = document.querySelector(\".places__list\");\nconst titleProfile = document.querySelector(\".profile__title\");\nconst descriptionProfile = document.querySelector(\".profile__description\");\nconst profileAvatar = document.querySelector(\".profile__image\");\n\nconst formProfile = document.forms.edit_profile;\nconst formNewPlace = document.forms.new_place;\nconst formAvatar = document.forms.avatar;\n\nconst popupTypeImage = document.querySelector(\".popup_type_image\");\nconst popupImage = popupTypeImage.querySelector(\".popup__image\");\nconst popupCaption = popupTypeImage.querySelector(\".popup__caption\");\nconst popupProfile = document.querySelector(\".popup_type_edit\");\nconst popupNewPlace = document.querySelector(\".popup_type_new-card\");\nconst popupAvatar = document.querySelector(\".popup_type_avatar\");\nconst popupConfirm = document.querySelector(\".popup_type_confirm\");\n\nconst editButton = document.querySelector(\".profile__edit-button\");\nconst addButton = document.querySelector(\".profile__add-button\");\nconst avatarButton = document.querySelector(\".profile__image-button\");\nconst confirmButton = document.querySelector(\".popup__button-confirm\");\n\nlet userId = null;\nlet cardIdToDelete;\nlet cardElementToDelete;\n\nconst validationConfig = {\n  formSelector: \".popup__form\",\n  inputSelector: \".popup__input\",\n  submitButtonSelector: \".popup__button\",\n  inactiveButtonClass: \"popup__button_inactive\",\n  inputErrorClass: \"popup__input_type_error\",\n  errorClass: \"popup__input-error_active\",\n};\n\nfunction handleLikeCard(cardId, isLiked, likeButton, likeCounter) {\n  const likeAction = isLiked ? unlikeCard : likeCard;\n\n  likeAction(cardId)\n    .then((updatedCard) => {\n      likeButton.classList.toggle(\"card__like-button_is-active\");\n      likeCounter.textContent = updatedCard.likes.length;\n    })\n    .catch((error) => {\n      console.log(\"Ошибка обновления лайка:\", error);\n    });\n}\n\nfunction handleConfirmToDeleteCard(cardId, cardElement) {\n  cardIdToDelete = cardId;\n  cardElementToDelete = cardElement;\n\n  openPopup(popupConfirm);\n}\n\nfunction handleDeleteCard(cardId, cardElement) {\n  deleteCard(cardId)\n    .then(() => {\n      cardElement.remove();\n    })\n    .catch((error) => {\n      console.log(\"Ошибка при удалении карточки:\", error);\n    });\n}\n\nfunction openCardPopup(cardData) {\n  popupImage.src = cardData.link;\n  popupImage.alt = cardData.name;\n  popupCaption.textContent = cardData.name;\n  openPopup(popupTypeImage);\n}\n\nfunction updateUserData(userData) {\n  titleProfile.textContent = userData.name;\n  descriptionProfile.textContent = userData.about;\n  profileAvatar.style.backgroundImage = `url(${userData.avatar})`;\n}\n\nfunction handleProfileFormSubmit(evt) {\n  evt.preventDefault();\n  const name = formProfile.elements.name.value;\n  const about = formProfile.elements.description.value;\n  renderLoading(true);\n\n  editProfile(name, about)\n    .then(() => {\n      titleProfile.textContent = name;\n      descriptionProfile.textContent = about;\n      setTimeout(() => {\n        closePopup(popupProfile);\n      }, 100);\n    })\n    .catch((error) => {\n      console.log(\"Ошибка обновления профиля:\", error);\n    })\n    .finally(() => {\n      renderLoading(false);\n    });\n}\n\nfunction handleNewPlaceFormSubmit(evt) {\n  evt.preventDefault();\n  const name = formNewPlace.elements.name.value;\n  const link = formNewPlace.elements.link.value;\n  renderLoading(true);\n\n  addCard(name, link)\n    .then((newCard) => {\n      placesList.prepend(\n        createCard(\n          newCard,\n          handleConfirmToDeleteCard,\n          openCardPopup,\n          handleLikeCard,\n          userId\n        )\n      );\n      setTimeout(() => {\n        closePopup(popupNewPlace);\n      }, 100);\n      formNewPlace.reset();\n    })\n    .catch((error) => {\n      console.log(\"Ошибка добавления карточки:\", error);\n    })\n    .finally(() => {\n      renderLoading(false);\n    });\n}\n\nfunction handleAvatarFormSubmit(evt) {\n  evt.preventDefault();\n  const link = formAvatar.elements.link.value;\n  renderLoading(true);\n\n  editAvatar(link)\n    .then(() => {\n      profileAvatar.style.backgroundImage = `url(${link})`;\n      setTimeout(() => {\n        closePopup(popupAvatar);\n      }, 100);\n      formAvatar.reset();\n    })\n    .catch((error) => {\n      console.log(\"Ошибка при обновлении аватара:\", error);\n    })\n    .finally(() => {\n      renderLoading(false);\n    });\n}\n\nfunction renderLoading(isLoading) {\n  const popupButton = document.querySelector(\".popup_is-opened .popup__button\");\n  popupButton.textContent = isLoading ? \"Сохранение...\" : \"Сохранение\";\n}\n\neditButton.addEventListener(\"click\", () => {\n  formProfile.elements.name.value = titleProfile.textContent;\n  formProfile.elements.description.value = descriptionProfile.textContent;\n  clearValidation(formProfile, validationConfig);\n  openPopup(popupProfile);\n});\n\naddButton.addEventListener(\"click\", () => {\n  formNewPlace.reset();\n  clearValidation(formNewPlace, validationConfig);\n  openPopup(popupNewPlace);\n});\n\navatarButton.addEventListener(\"click\", () => {\n  formAvatar.reset();\n  clearValidation(formAvatar, validationConfig);\n  openPopup(popupAvatar);\n});\n\nconfirmButton.addEventListener(\"click\", () => {\n  handleDeleteCard(cardIdToDelete, cardElementToDelete);\n  closePopup(popupConfirm);\n});\n\nformProfile.addEventListener(\"submit\", handleProfileFormSubmit);\nformNewPlace.addEventListener(\"submit\", handleNewPlaceFormSubmit);\nformAvatar.addEventListener(\"submit\", handleAvatarFormSubmit);\n\nenableValidation(validationConfig);\ninitPopups();\n\nPromise.all([getArrayCards(), getUser()])\n  .then(([cardsData, userData]) => {\n    updateUserData(userData);\n    userId = userData._id;\n    cardsData.forEach((cardData) => {\n      placesList.append(\n        createCard(\n          cardData,\n          handleConfirmToDeleteCard,\n          openCardPopup,\n          handleLikeCard,\n          userId\n        )\n      );\n    });\n  })\n  .catch((error) => {\n    console.log(\"Ошибка при загрузке данных:\", error);\n  });\n"],"names":["url","headers","config","authorization","testResponse","res","ok","json","Promise","reject","concat","status","likeCard","cardId","fetch","method","then","unlikeCard","createCard","cardData","handleConfirmToDeleteCard","handleImageClick","handleLike","userId","cardElement","document","querySelector","content","cloneNode","cardImage","deleteButton","likeButton","likeCounter","src","link","alt","name","textContent","likes","length","owner","_id","style","display","forEach","like","classList","toggle","addEventListener","isLiked","contains","openPopup","popup","add","handleEscClose","closePopup","remove","removeEventListener","evt","key","openedPopup","hideInputError","formElement","inputElement","settings","errorElement","id","inputErrorClass","errorClass","toggleButtonState","inputList","buttonElement","some","validity","valid","inactiveButtonClass","disabled","clearValidation","Array","from","querySelectorAll","inputSelector","submitButtonSelector","cardIdToDelete","cardElementToDelete","placesList","titleProfile","descriptionProfile","profileAvatar","formProfile","forms","edit_profile","formNewPlace","new_place","formAvatar","avatar","popupTypeImage","popupImage","popupCaption","popupProfile","popupNewPlace","popupAvatar","popupConfirm","editButton","addButton","avatarButton","confirmButton","validationConfig","formSelector","handleLikeCard","updatedCard","catch","error","console","log","openCardPopup","renderLoading","isLoading","elements","value","description","reset","deleteCard","preventDefault","about","body","JSON","stringify","editProfile","setTimeout","finally","addCard","newCard","prepend","editAvatar","backgroundImage","patternMismatch","setCustomValidity","dataset","errorMessage","showInputError","validationMessage","checkInputValidity","setEventListeners","target","all","_ref","_ref2","cardsData","userData","updateUserData","append"],"sourceRoot":""}